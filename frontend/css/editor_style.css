/* ========= ê³µí†µ ìƒ‰ìƒ/íƒ€ì´í¬ ë³€ìˆ˜ ========= */
:root {
    --bg: #f5f6f8;      /* ì „ì²´ ë°°ê²½ìƒ‰ */
    --panel: #fff;      /* ì¹´ë“œ, íŒ¨ë„ ë°°ê²½ìƒ‰ */
    --line: #e9ecef;    /* ê²½ê³„ì„  ìƒ‰ */
    --muted: #6c757d;   /* ë³´ì¡° í…ìŠ¤íŠ¸ ìƒ‰ */
    --accent: #16243f;  /* ë©”ì¸ í¬ì¸íŠ¸ ìƒ‰ */
  }
  
  /* ëª¨ë“  ìš”ì†Œ ê¸°ë³¸ box-sizing ì„¤ì • */
  * {
    box-sizing: border-box;
  }
  
  
  /* ========= body ê¸°ë³¸ ì„¤ì • ========= */
  body {
    margin: 0;
    background: var(--bg);
    font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto,
      Apple SD Gothic Neo, Noto Sans KR, sans-serif;
    color: #222;
  }
  
  
  /* ========= ìƒë‹¨ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ========= */
  .toast {
    position: fixed;
    top: 12px;
    left: 50%;
    transform: translateX(-50%) translateY(-4px);
    padding: 8px 16px;
    border-radius: 999px;
    background: rgba(0, 0, 0, 0.82);
    color: #fff;
    font-size: 15px;
    z-index: 2000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease, transform 0.2s ease;
  }
  
  /* í† ìŠ¤íŠ¸ê°€ show í´ë˜ìŠ¤ì¼ ë•Œë§Œ ë³´ì´ê²Œ */
  .toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(4px);
  }
  
  
  /* ========= ìƒë‹¨ ë°”, íˆ´ë°” ê³µí†µ ìŠ¤íƒ€ì¼ ========= */
  .topbar {
    height: 52px;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 12px;
    border-bottom: 1px solid var(--line);
    background: #fff;
    position: sticky;
    top: 0;
    z-index: 5;
  }
  
  /* ë‘ ë²ˆì§¸ ì¤„ íˆ´ë°” */
  .toolbar {
    height: 52px;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 12px;
    border-bottom: 1px solid var(--line);
    background: #fff;
    position: sticky;
    top: 0;
    z-index: 5;
  }
  
  /* ë„êµ¬ ë²„íŠ¼(ğŸ‘†, ğŸ”µ, ğŸ”— ë“±) ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
  .toolbtn {
    width: 3%;
    height: 38px;
    border: 1px solid #3a3b3d;
    border-radius: 10px;
    background: #fff;
    cursor: pointer;
  }
  /* í˜„ì¬ ì„ íƒëœ ë„êµ¬ ë²„íŠ¼ ìƒíƒœ */
  .toolbtn.active {
    border-color: var(--accent);
    background: #eef4ff;
    color: var(--accent);
  }
  
  
  /* ========= ê³µí†µ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ========= */
  .btn {
    height: 32px;
    padding: 0 10px;
    border: 1px solid var(--line);
    background: #fff;
    border-radius: 8px;
    cursor: pointer;
  }
  /* ë©”ì¸ ì•¡ì…˜ ë²„íŠ¼(íŒŒë€ìƒ‰) */
  .btn.primary {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
  }
  /* disabled ìƒíƒœ ë²„íŠ¼ */
  .btn[disabled] {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  
  /* ========= ì „ì²´ ë ˆì´ì•„ì›ƒ (ì¢Œ/ì¤‘ì•™/ìš° 3ë¶„í• ) ========= */
  .wrap {
    display: grid;
    grid-template-columns: 320px 1fr 280px; /* ì¢Œì¸¡ íŒ¨ë„ / ì¤‘ì•™ ìº”ë²„ìŠ¤ / ìš°ì¸¡ íŒ¨ë„ */
    gap: 12px;
    padding: 12px;
    height: calc(100vh - 100px); /* ìƒë‹¨ë°” ë†’ì´(ëŒ€ëµ)ë§Œí¼ ì œì™¸ */
  }
  
  /* ì¹´ë“œ ê³µí†µ ìŠ¤íƒ€ì¼ (ì¢ŒÂ·ìš° íŒ¨ë„, ìº”ë²„ìŠ¤ ë“±) */
  .card {
    background: var(--panel);
    border: 1px solid var(--line);
    border-radius: 14px;
  }
  /* ì¢Œì¸¡ íŒ¨ë„ ê³µí†µ */
  .left,
  .right {
    padding: 12px;
    overflow: auto; /* ë‚´ìš©ì´ ë„˜ì¹  ë•Œ ìŠ¤í¬ë¡¤ */
  }
  
  /* ê·¸ë£¹ ë°•ìŠ¤ (ì„¹ì…˜) */
  .group {
    border: 1px solid var(--line);
    border-radius: 12px;
    margin-bottom: 12px;
  }
  /* ê·¸ë£¹ í—¤ë” (íƒ€ì´í‹€) */
  .group > h3 {
    margin: 0;
    padding: 10px 12px;
    border-bottom: 1px solid var(--line);
    font-size: 14px;
  }
  /* ê·¸ë£¹ ë‚´ë¶€ ì»¨í…ì¸  ì»¨í…Œì´ë„ˆ */
  .group .inner {
    display: grid;
    gap: 10px;
    padding: 10px 12px;
  }
  
  
  /* ========= ì¢Œì¸¡ Layers íŒ¨ë„ ========= */
  #layersList {
    display: grid;
    gap: 6px;
  }
  
  /* ê° ë ˆì´ì–´ ì•„ì´í…œ(ë…¸ë“œ/ë§í¬/í´ë¦¬ê³¤ ë“± ê°œë³„ ìš”ì†Œ ì„¤ëª… ì¤„) */
  .layer-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 8px 10px;
    border: 1px solid var(--line);
    border-radius: 10px;
    background: #fff;
    cursor: pointer;
    user-select: none;
  }
  /* hover ì‹œ ì‚´ì§ ê°•ì¡° */
  .layer-item:hover {
    background: #f7f9ff;
    border-color: var(--accent);
  }
  /* ì„ íƒëœ ë ˆì´ì–´ */
  .layer-item.active {
    background: #eef4ff;
    border-color: var(--accent);
    color: var(--accent);
  }
  /* ë ˆì´ì–´ ì•„ì´í…œ ë‚´ ì„œë¸Œ í…ìŠ¤íŠ¸ */
  .layer-item .meta {
    font-size: 12px;
    color: var(--muted);
  }
  
  .layer-meta {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .layer-eye {
    border: none;
    background: none;
    cursor: pointer;
    font-size: 14px;
    line-height: 1;
    opacity: 0.8;
  }
  
  .layer-eye:hover {
    opacity: 1;
  }
  
  .layer-item.is-hidden .label {
    opacity: 0.4;
    text-decoration: line-through;
  }
  
  
  /* ========= í¼ ìœ í‹¸ë¦¬í‹° ========= */
  /* ì„¸ë¡œë¡œ ê°„ê²© 8pxì”© ìŒ“ëŠ” ë ˆì´ì•„ì›ƒ */
  .stack8 > * {
    margin-top: 8px;
  }
  
  /* row: label + input í•œ ì¤„ ì •ë ¬ */
  .row {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  
  /* row ì•ˆì˜ label ìŠ¤íƒ€ì¼ */
  .row > label {
    min-width: 64px;
    color: var(--muted);
    font-size: 12px;
  }
  
  /* select, input ê³µí†µ ìŠ¤íƒ€ì¼ */
  select,
  input[type="number"],
  input[type="text"] {
    height: 32px;
    border: 1px solid var(--line);
    border-radius: 8px;
    padding: 0 8px;
    background: #fff;
    flex: 1;
    width: 100%;
  }
  /* ========= ì¤‘ì•™ ìº”ë²„ìŠ¤ ì˜ì—­ ========= */
  .center {
    position: relative;
    overflow: hidden;
  }
  
  /* ì‹¤ì œ ìº”ë²„ìŠ¤ ì¹´ë“œ (ë°°ê²½ íšŒìƒ‰ + ë¼ìš´ë“œ) */
  #canvas {
    position: relative;
    height: 100%;
    display: grid;
    place-items: center;
    background: #707070;
    border: 1px solid var(--line);
    border-radius: 14px;
    overflow: hidden;
  }
  
  #stageWrap {
    position: relative;
    display: inline-block;
    transform-origin: 0 0;
    will-change: transform;
    touch-action: none;
    /* border-radius: 12px; */
    /* box-shadow: 0 10px 24px rgba(15, 23, 42, 0.18); */
    overflow: hidden;
    background: transparent;
  }
  
  /* stage: ì´ë¯¸ì§€ + SVG overlayë¥¼ í†µì§¸ë¡œ ê°ì‹¸ëŠ” ë ˆì´ì–´ */
  #stage {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    display: block;
  }
  
  #stageBackground {
    fill: #707070;
  }
  
  #documentLayer {
    pointer-events: none;
  }
  
  #documentBackground {
    fill: #fff;
  }
  
  #backgroundLayer {
    pointer-events: none;
  }
  
  /* ì¸µ ë°°ê²½ ì´ë¯¸ì§€ */
  #bgImg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    max-width: none;
    max-height: none;
    display: none;
    pointer-events: none;
    user-select: none;
    -webkit-user-drag: none;
    -webkit-user-select: none;
    -moz-user-select: none;
  }
  
  /* SVG overlay (ë…¸ë“œ/ë§í¬/í´ë¦¬ê³¤ ë“±) */
  #overlay {
    position: absolute;
    inset: 0;
    pointer-events: auto;      /* ì´ìª½ì—ì„œ í´ë¦­ ë“± ì´ë²¤íŠ¸ ì²˜ë¦¬ */
    --node-radius: 5px;
    --node-selected-radius: 7px;
    --node-selected-stroke-width: 2px;
    --node-highlight-stroke-width: 3px;
    --node-poly-active-stroke-width: 2.5px;
    --poly-vertex-radius: 3px;
    --poly-vertex-stroke-width: 2px;
    --link-stroke-width: 2px;
    --link-selected-stroke-width: 3px;
    --poly-stroke-width: 2px;
    --poly-selected-stroke-width: 2.2px;
    --poly-preview-stroke-width: 2px;
  }
  
  /* ========= ë…¸ë“œ / ë§í¬ / í´ë¦¬ê³¤ ìŠ¤íƒ€ì¼ ========= */
  
  /* ì„ íƒëœ ë…¸ë“œë¥¼ ê°•ì¡° í‘œì‹œí•  ë•Œ ì‚¬ìš© (circle ìš”ì†Œ ë“±) */
  .selected-node {
    stroke: #007bff;  /* íŒŒë€ í…Œë‘ë¦¬ */
    stroke-width: var(--node-highlight-stroke-width, 3px);
  }
  
  /* ê¸°ë³¸ ë…¸ë“œ ì  ìŠ¤íƒ€ì¼ */
  .node-dot {
    cursor: pointer;
  }
  
  /* ì„ íƒëœ ë…¸ë“œ ì  */
  .node-dot.selected {
    stroke: #e11d48;
    stroke-width: var(--node-selected-stroke-width, 2px);
  }
  
  /* í´ë¦¬ê³¤ í¸ì§‘ ì‹œ í™œì„± ê¼­ì§“ì  ê°•ì¡° */
  .node-dot.poly-vertex-active {
    stroke: #0cbd29;
    stroke-width: var(--node-poly-active-stroke-width, 2.5px);
  }
  
  /* ë§í¬ ì„  ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
  .link-line {
    stroke: #2563eb;
    stroke-width: var(--link-stroke-width, 2px);
  }
  
  /* ì„ íƒëœ ë§í¬ ì„  */
  .link-line.selected {
    stroke: #e11d48;
    stroke-width: var(--link-selected-stroke-width, 3px);
  }
  
  /* í´ë¦¬ê³¤ ì±„ìš°ê¸°/í…Œë‘ë¦¬ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
  .poly-fill {
    fill: var(--accent, #007aff);
    fill-opacity: 0.12;
    stroke: var(--accent, #007aff);
    stroke-width: var(--poly-stroke-width, 2px);
  }
  
  /* ì„ íƒëœ í´ë¦¬ê³¤: ë¹¨ê°„ ë°°ê²½ìœ¼ë¡œ ê°•ì¡° */
  .poly-fill.selected {
    fill: rgba(255, 8, 8, 1);  /* ì§„í•œ ë¹¨ê°„ ë°°ê²½ */
    stroke: #dc2626;           /* ë¹¨ê°„ í…Œë‘ë¦¬ */
    stroke-width: var(--poly-selected-stroke-width, 2.2px);
  }
  
  /* í´ë¦¬ê³¤ ê·¸ë¦¬ëŠ” ì¤‘, ë¯¸ë¦¬ë³´ê¸° ì„ (ì ì„ ) */
  .poly-preview {
    fill: none;
    stroke: #007aff;
    stroke-width: var(--poly-preview-stroke-width, 2px);
    stroke-dasharray: 6 6;
  }
  
  /* í´ë¦¬ê³¤ ê¼­ì§“ì  ì  */
  .poly-vertex {
    fill: #fff;
    stroke: #007aff;
    stroke-width: var(--poly-vertex-stroke-width, 2px);
  }
  
  /* í´ë¦¬ê³¤ í´ë¦­ ì˜ì—­(hitbox) í™•ì¥ìš© */
  .poly-hit {
    fill: transparent;
    pointer-events: fill;
    stroke-width: 0;
    stroke: transparent;
  }
  
  /* ========= ìš°ì¸¡ ì†ì„± íŒ¨ë„(ë…¸ë“œ/ë§í¬/í´ë¦¬ê³¤) ========= */
  
  .prop-group {
    border: 1px solid var(--line);
    border-radius: 12px;
    margin-bottom: 12px;
    background: #fff;
    font-size: 13px;
  }
  
  .prop-group > h3 {
    margin: 0;
    padding: 10px 12px;
    border-bottom: 1px solid var(--line);
    font-size: 14px;
    font-weight: 600;
  }
  
  /* prop-group ë‚´ë¶€ ê° í•„ë“œ ë¸”ë¡ */
  .prop-group .field {
    padding: 8px 12px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    border-top: 1px solid var(--line);
  }
  
  /* ì²« ë²ˆì§¸ í•„ë“œëŠ” ìœ—ì¤„(border-top) ì œê±° */
  .prop-group .field:first-of-type {
    border-top: none;
  }
  
  /* í•„ë“œ ë¼ë²¨ */
  .prop-group .field > label {
    font-size: 12px;
    color: var(--muted);
  }
  
  /* ì¸í’‹ ì „ì²´ í­ */
  .prop-group .input-block {
    width: 100%;
  }
  
  /* ========= í´ë¦¬ê³¤ ê¼­ì§“ì  ë¦¬ìŠ¤íŠ¸(í…Œì´ë¸” ë¹„ìŠ·í•œ UI) ========= */
  
  .poly-vertices {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  /* ê° ê¼­ì§“ì  í–‰: P1, X, Y, ë…¸ë“œëª… */
  .poly-vertex-row {
    display: grid;
    grid-template-columns: 26px 1fr 1fr auto;
    gap: 4px;
    align-items: center;
  }
  
  /* P1, P2 ê°™ì€ ë¼ë²¨ */
  .poly-vertex-row .pv-label {
    font-size: 12px;
    color: var(--muted);
  }
  
  /* ì¢Œí‘œ ì…ë ¥ ì¸í’‹ */
  .poly-vertex-row .coord-input {
    width: 100%;
  }
  
  /* ë…¸ë“œ ì´ë¦„ í…ìŠ¤íŠ¸ */
  .poly-vertex-row .pv-node {
    min-width: 80px;
    text-align: right;
    font-size: 12px;
    color: #111;
    font-weight: 500;
  }
  
  /* ========= ë¹ˆ ìƒíƒœ ì•ˆë‚´(ì²˜ìŒ ì§„ì… ì‹œ) ========= */
  
  .empty {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
  }
  
  /* ë§í’ì„  ìŠ¤íƒ€ì¼ */
  .empty .bubble {
    background: #e3e3e3;
    border: 1px dashed var(--line);
    border-radius: 14px;
    padding: 22px 28px;
    color: #000;
  }
  
  /* ========= ìš°ì¸¡ í•˜ë‹¨ ìƒíƒœë°” ========= */
  
  .statusbar {
    position: absolute;
    right: 12px;
    bottom: 12px;
    font-size: 12px;
    color: #333;
    background: #fff;
    border: 1px solid var(--line);
    border-radius: 8px;
    padding: 4px 8px;
  }
  
  /* ========= ëª¨ë‹¬(ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± ë“±) ========= */
  
  /* ëª¨ë‹¬ ë’·ë°°ê²½ (ë°˜íˆ¬ëª… ì˜¤ë²„ë ˆì´) */
  .modal-back {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.4);
    display: none; /* í•„ìš”í•  ë•Œ flexë¡œ ë°”ê¿”ì„œ ì¤‘ì•™ ì •ë ¬ */
    align-items: center;
    justify-content: center;
    z-index: 10;
  }
  
  /* ëª¨ë‹¬ ë°•ìŠ¤ ë³¸ì²´ */
  .modal {
    width: min(900px, 96vw);
    height: min(600px, 90vh);
    overflow: auto;
    background: #fff;
    border-radius: 16px;
    border: 1px solid var(--line);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
  }
  
  /* ëª¨ë‹¬ í—¤ë” (íƒ€ì´í‹€ + ë‹«ê¸° ë²„íŠ¼) */
  .modal header {
    padding: 14px 16px;
    border-bottom: 1px solid var(--line);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  /* ëª¨ë‹¬ ë³¸ë¬¸ ì˜ì—­ */
  .modal .body {
    padding: 14px 16px;
  }
  
  /* ìƒˆ í”„ë¡œì íŠ¸ ëª¨ë‹¬ì—ì„œ ì¸µë³„ ì„¤ì • ê·¸ë¦¬ë“œ */
  .floor-grid {
    display: grid;
    grid-template-columns: 80px 1fr auto auto;
    gap: 8px;
    align-items: center;
  }
  
  /* pill ìŠ¤íƒ€ì¼(ì‘ì€ ë±ƒì§€ ëŠë‚Œ) */
  .pill {
    font-size: 12px;
    padding: 2px 8px;
    border: 1px solid var(--line);
    border-radius: 999px;
    color: #555;
    background: #fafafa;
  }
  
  /* ë³´ì¡° í…ìŠ¤íŠ¸ */
  .muted {
    color: var(--muted);
    font-size: 12px;
  }
  
  /* í™”ë©´ì—ì„œ ìˆ¨ê¸°ê³  ì‹¶ì„ ë•Œ ê³µí†µìœ¼ë¡œ ì“°ëŠ” í´ë˜ìŠ¤ */
  .hidden {
    display: none;
  }
  
  /* ========= ë§í¬/ìŠ¤ëƒ… ê°€ì´ë“œìš© ë°ì½”ë ˆì´ì…˜ ========= */
  
  /* ë§ˆìš°ìŠ¤ ì´ë™ ì¤‘ ë¯¸ë¦¬ë³´ê¸° ì„  (ë§í¬ ì—°ê²° ë“±) */
  .preview-line {
    stroke: var(--accent);
    stroke-width: 2;
    stroke-dasharray: 6 4;
    pointer-events: none;
  }
  
  /* ìŠ¤ëƒ…ìš© ê°€ì´ë“œ ë¼ì¸ (ì ì„ ) */
  .guide-line {
    stroke: var(--accent);
    stroke-opacity: 0.55;
    stroke-width: 1;
    stroke-dasharray: 4 4;
    pointer-events: none;
  }
  
  /* ì•µì»¤ ì›í˜• ê°€ì´ë“œ */
  .anchor-ring {
    fill: none;
    stroke: var(--accent);
    stroke-width: 2;
    stroke-dasharray: 2 2;
    pointer-events: none;
  }
  
  /* ë””ë²„ê·¸/ì¥ì‹/ìƒíƒœë°”ëŠ” ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ ë§‰ê¸° */
  .snap-debug,
  .decor,
  .statusbar {
    pointer-events: none;
  }
